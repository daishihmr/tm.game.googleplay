<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
</head>

<body>

    <canvas id="app" width="500" height="500"></canvas>
    <div>
        <span id="signinButton"></span>
    </div>

    <script src="tmlib.js"></script>
    <script src="signinbutton.js"></script>
    <script src="leaderboardscene.js"></script>
    <script src="gpgsconstants.js"></script>
    <script>
    tm.main(function() {

        app = tm.display.CanvasApp("#app")
        app.resize(500, 500);
        app.run();

        var signinButton = tm.google.SigninButton("#signinButton", {
            clientid: gpgsConstants.CLIENT_ID,
        });

        signinButton
            .on("signin", function(e) {
                console.log(e);
                gapi.client.load("games", "v1", function() {
                    app.replaceScene(MainScene());
                });
            })
            .on("signout", function(e) {
                console.log(e);
            });
    });

    tm.define("MainScene", {
        superClass: "tm.app.Scene",

        init: function() {
            var scene = this;
            this.superInit();

            this.fromJSON({
                children: {
                    button: {
                        type: "tm.ui.FlatButton",
                        init: {
                            text: "open",
                        },
                        x: 250,
                        y: 250,
                        onpush: function() {
                            scene.app.pushScene(tm.google.LeaderboardScene({
                                applicationId: "257317887375",
                                width: app.width,
                                height: app.height,
                            }));
                        }
                    }
                }
            })
        },
    });
    </script>

</body>

</html>
